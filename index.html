<!doctype html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ü‡¶∞‡ßç‡¶® ‡¶Æ‡¶ø‡¶®‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶∏‡¶ø‡¶è‡¶∏‡¶è‡¶∏: ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶•‡¶ø‡¶Æ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            transition: background-color 0.3s;
            color: var(--tg-theme-text-color, #ffffff);
        }
        .container {
            padding: 16px;
        }
        .card {
            background-color: var(--tg-theme-secondary-bg-color, #2c2c2e);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }
        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            background-color: var(--tg-theme-bg-color, #2c2c2e);
        }
        .task-item.completed {
            opacity: 0.6;
        }
        .task-item button {
            padding: 8px 15px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            background-color: var(--tg-theme-button-color, #007aff);
            color: var(--tg-theme-button-text-color, #ffffff);
            font-weight: bold;
        }
        .task-item button:disabled {
            background-color: var(--tg-theme-hint-color, #aaa);
            cursor: not-allowed;
        }
        .withdraw-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            background-color: var(--tg-theme-button-color, #007aff);
            color: var(--tg-theme-button-text-color, #ffffff);
            margin-top: 15px;
            cursor: pointer;
        }
        .referral-code {
            background-color: #1c1c1d;
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
            color: #fff;
            display: block;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        </div>

    <script>
        const tasksData = [
            { id: 1, title: '‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®', reward: 50, completed: false },
            { id: 2, title: '‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶®', reward: 500, completed: false },
            { id: 3, title: '‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶ï‡ßá ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®', reward: 1000, completed: false },
        ];
        let balance = 12450;
        
        function renderApp() {
            const webApp = window.Telegram.WebApp;
            const user = webApp.initDataUnsafe.user || { first_name: '‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ', id: 'XXXX' };
            const themeParams = webApp.themeParams || {};

            // CSS ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            document.documentElement.style.setProperty('--tg-theme-text-color', themeParams.text_color || '#ffffff');
            document.documentElement.style.setProperty('--tg-theme-hint-color', themeParams.hint_color || '#aaa');
            document.documentElement.style.setProperty('--tg-theme-bg-color', themeParams.background_color || '#2c2c2e');
            document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', themeParams.secondary_bg_color || '#1c1c1d');
            document.documentElement.style.setProperty('--tg-theme-button-color', themeParams.button_color || '#007aff');
            document.documentElement.style.setProperty('--tg-theme-button-text-color', themeParams.button_text_color || '#ffffff');
            document.body.style.backgroundColor = themeParams.secondary_bg_color || '#1c1c1d';

            // Main App Content
            const app = document.getElementById('app');
            app.innerHTML = `
                <header style="text-align: center; margin-bottom: 30px; padding: 10px 0; border-bottom: 1px solid var(--tg-theme-hint-color);">
                    <h2 style="margin: 0;">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶â‡¶™‡¶æ‡¶∞‡ßç‡¶ú‡¶® ‡¶Æ‡¶ø‡¶®‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</h2>
                    <p style="color: var(--tg-theme-hint-color); margin: 5px 0 0 0;">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ, ${user.first_name}!</p>
                </header>

                <div class="card">
                    <p style="font-size: 16px; margin: 0 0 5px 0; color: var(--tg-theme-hint-color);">‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p>
                    <h1 id="balance-display" style="font-size: 36px; margin: 0; font-weight: bold;">üí∞ ${balance}</h1>
                    <button class="withdraw-btn" id="withdraw-btn">
                        ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® (Withdraw)
                    </button>
                </div>

                <section>
                    <h3 style="border-left: 3px solid var(--tg-theme-button-color); padding-left: 10px;">‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</h3>
                    <div id="tasks-list">
                        ${tasksData.map(task => `
                            <div class="task-item ${task.completed ? 'completed' : ''}" data-task-id="${task.id}" data-task-reward="${task.reward}">
                                <div>
                                    <p style="margin: 0; font-weight: bold;">${task.title}</p>
                                    <span style="color: var(--tg-theme-hint-color);">+${task.reward} ‡¶ï‡¶Ø‡¶º‡ßá‡¶®</span>
                                </div>
                                <button class="task-btn" ${task.completed ? 'disabled' : ''}>
                                    ${task.completed ? '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®' : '‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®'}
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </section>
                
                <section style="margin-top: 30px;">
                    <h3 style="border-left: 3px solid var(--tg-theme-button-color); padding-left: 10px;">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‡¶ú‡¶æ‡¶®‡¶æ‡¶®</h3>
                    <div class="card">
                        <p style="margin: 0 0 10px 0;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®:</p>
                        <code class="referral-code">
                            https://t.me/YourBotUsername?start=ref_${user.id}
                        </code>
                        <button class="withdraw-btn" id="copy-btn" style="padding: 8px 15px;">
                            üîó ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                </section>
            `;

            // ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®
            document.querySelectorAll('.task-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.disabled) return;
                    const item = this.closest('.task-item');
                    const taskId = parseInt(item.getAttribute('data-task-id'));
                    const reward = parseInt(item.getAttribute('data-task-reward'));

                    // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    balance += reward;
                    document.getElementById('balance-display').textContent = 'üí∞ ' + balance;
                    
                    // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    const task = tasksData.find(t => t.id === taskId);
                    if (task) task.completed = true;
                    item.classList.add('completed');
                    this.textContent = '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®';
                    this.disabled = true;

                    webApp.showAlert(`‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ${reward} ‡¶ï‡¶Ø‡¶º‡ßá‡¶® ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶®‡•§`);
                });
            });

            document.getElementById('withdraw-btn').addEventListener('click', () => {
                webApp.showAlert('‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®...');
            });

            document.getElementById('copy-btn').addEventListener('click', () => {
                const referralLink = `https://t.me/YourBotUsername?start=ref_${user.id}`;
                webApp.copyText(referralLink);
                webApp.showAlert('‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            });
        }

        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
            renderApp();
        } else {
            // ‡¶Ø‡¶¶‡¶ø ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º ‡¶§‡¶¨‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞
            document.getElementById('app').innerHTML = `<div style="text-align: center; color: white;">‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶Æ‡¶ø‡¶®‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®‡•§</div>`;
        }
    </script>
</body>
</html>
